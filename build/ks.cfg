#platform=x86, AMD64, or Intel EM64T
#version=DEVEL

# Firewall configuration
firewall --enabled --http --ssh --smtp

# Install OS instead of upgrade
install

# Use network installation
url --url="http://ftp.nluug.nl/ftp/pub/os/Linux/distr/CentOS/6.5/os/x86_64/"

# Root password (EfaPr0j3ct) this password will be changed later on.
rootpw --iscrypted $1$IGB3kcef$3CbZE5Gca08Pt5Ld2Ereq0

# System authorization information
auth  --useshadow  --passalgo=sha512

# Use text mode install
text

# System keyboard
keyboard us-acentos

# System language
lang en_US

# SELinux configuration
selinux --enforcing

# Do not configure the X Window System
skipx

# Installation logging level
logging --level=info

# Reboot after installation
reboot

# System timezone
timezone --isUtc Etc/UTC

# Network information
network  --bootproto=dhcp --device=eth0 --onboot=on

# System bootloader configuration
bootloader --location=mbr

# Clear the Master Boot Record
zerombr

# Partition clearing information
clearpart --all --initlabel

# Disk partitioning information
part /boot --asprimary --fstype="ext3" --size=500
part pv.01 --size=1 --grow 
volgroup vg_00 pv.01
logvol / --vgname=vg_00 --size=8192 --name=lv_root
logvol /tmp --vgname=vg_00 --size=1024 --name=lv_tmp
logvol /var --vgname=vg_00 --size=1 --grow --name=lv_var

# Install basic needed packages.
%packages
@base
@core
gpg
mysql-server
mysql
screen
php
php-gd
php-mysql
httpd
caching-nameserver
rrdtool
rrdtool-perl
postfix
postfix-mysql
spamassassin
tnef
cyrus-sasl-md5
cyrus-sasl-sql
cyrus-sasl-ldap
ImageMagick
ntp
perl-Archive-Tar
perl-Archive-Zip
perl-BerkeleyDB
perl-Compress-Zlib
perl-Convert-BinHex
perl-Convert-TNEF
perl-Digest-SHA1
perl-DBD-MySQL
perl-DBD-SQLite
perl-Filesys-Df
perl-File-Tail
perl-HTML-Parser
perl-IO-stringy
perl-IO-Socket-INET6
perl-IO-Socket-SSL
perl-IO-Zlib
perl-IO-Multiplex
perl-IP-Country
perl-MailTools
perl-Mail-SPF-Query
perl-MIME-tools
perl-Pod-Escapes
perl-Pod-Simple
perl-Test-Pod
perl-TimeDate
perl-Time-HiRes
perl-Net-CIDR
perl-Net-DNS
perl-Net-IP 
perl-Net-Ident
perl-Net-SSLeay
perl-Net-Server
perl-Net-LDAP
%end

%post
mkdir /var/log/EFA
/usr/bin/wget -q -O /tmp/build.bash -o /var/log/EFA/wget.log https://raw.github.com/E-F-A/v3/master/build/build.bash
chmod 700 /tmp/build.bash
logsave /var/log/EFA/build.log /tmp/build.bash
%end